<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Address Explorer</title>
    <link rel="stylesheet" href="static/explorer.css">
    <script src="static/angular.min.js"></script>
    <script>

    var obj = {
		address: '[address]',
		label: '[label]',
		classification: '[classification]',
		total_received: '[total_received]',
	};

    var module = angular.module('simpleDirective', [])
		 .config(function($interpolateProvider) {
		  $interpolateProvider.startSymbol('{[{');
		  $interpolateProvider.endSymbol('}]}');
		})
    	.controller('AsideCtrl', ['$scope', function($scope) {
    		$scope.obj = [];

    		$scope.human_readable = {'address':"Address",
    								 'label':"Blockchain.info Tag",
    								 'classification':"Classification",
    								 'total_received':"Total Received"};

    		$scope.update = function(addr_obj) {
    			$scope.obj = [];
    			for (attr in $scope.human_readable) {
    				if (addr_obj.hasOwnProperty(attr) && addr_obj[attr] != "") {
    					$scope.obj.push([$scope.human_readable[attr],addr_obj[attr]]);
    				}
    			}
    		}
    	}]);

    var update_aside = function(addr_obj) {
    	var scope = angular.element(document.getElementById("asidectrl")).scope();
    	scope.$apply(function(){
    		scope.update(addr_obj);
    	});
    };

    </script>
  </head>
  
  <body ng-app="simpleDirective">
  <aside id="asidectrl" ng-controller="AsideCtrl">
  		<div ng-repeat="line in obj">
  			<span> {[{line[0]}]}: {[{line[1]}]} </span>
  		</div>
  		<!--Known Addresses: {[{addr.address}]}<br/>
  		Blockchain.info Tag: {[{addr.label}]}<br/>
  		Classification: {[{addr.classification}]}<br/>
  		Total Received: {[{addr.total_received}]}<br/>
  		<a target="_blank" href="https://blockchain.info/address/{[{addr.address}]}">explore on blockchain.info</a>-->
  </aside>
  </body>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="static/explorer.js"></script>
</html>